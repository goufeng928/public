# 文章_Unix运维_Tcsh脚本_编译安装GNU-Make-4.3_GF_2023-05-27

csh 文件是一种 Unix Shell 脚本文件，其扩展名为 .csh 或 .tcsh。和其他 Unix Shell 脚本文件一样，它可用于执行一系列的命令，包括调用其他脚本或程序等。

通常，csh 文件中包含的命令会按照脚本文件的顺序依次执行。和其他 Shell 脚本文件相比，csh 文件具有更多的功能和优势，其中一个显著的特点是支持 C-Shell 语法。

Tcsh 是 csh 的增强版，并且完全兼容 csh。它不但具有 csh 的全部功能，还具有命令行编辑、拼写校正、可编程字符集、历史纪录、作业控制等功能，以及 C 语言风格的语法结构。

## 使用方法

* 下载源码包:

make-4.3.tar.gz (GNU Source)
  
* 放于指定路径:

这里 Tcsh Shell 脚本的全局变量 STORAGE 指定的存放源码包的路径 ==/home/goufeng== 可进行修改。
  
* 执行 Tcsh Shell 脚本:

输入 ==/[路径名]/[脚本名].sh== 即可进行自动编译部署，过程中提示输入 **(y/n)** 输入 **y** 则进行下一步，这样分阶段确认的原因是为了确保能够看到上一个源码编译结果中可能的错误和提示。

## 完整脚本

```shell
#! /bin/tcsh
# Create By GF 2023-05-27 23:16

# --------------------------------------------------
# Install First: 
# * None

# ------------------ GNU-Make-4.3 ------------------
# Need File: make-4.3.tar.gz (GNU Source)

# ==================================================
set STORAGE = /home/goufeng

# ########################################################################################################################################################################################################
# ############################################################################################# GNU-Make-4.3 #############################################################################################

# ====================================================================================================
# =================================== Compile Install GNU-Make-4.3 ===================================

if ( ! -d "/opt/gnu-make-4.3" ) then

    set VERIFY = "NULL"
    set STEP_UNZIPPED = 0
    set STEP_CONFIGURED = 0
    set STEP_INSTALLED = 0

    # ----------------------------------------------
    echo "[Confirm] Compile and Install ( gnu-make-4.3 )? (y/n)"
    # ..............................................
    set VERIFY = $<
    # ..............................................
    if ( $VERIFY != "y" ) exit 1

    # ----------------------------------------------
    tar -zxvf $STORAGE/make-4.3.tar.gz && set STEP_UNZIPPED = 1

    # ----------------------------------------------
    if ( $STEP_UNZIPPED == 1 && ! -f "$STORAGE/make-4.3/src/gnumake.h" ) then
        echo "[Caution] Source Code: ( make-4.3.tar.gz ) is Not The GNU Make Source Code."
        # ..........................................
        exit 1
    endif
    
    # ----------------------------------------------
    cd $STORAGE/make-4.3 && ./configure --prefix=/opt/gnu-make-4.3 && set STEP_CONFIGURED = 1
    
    # ----------------------------------------------
    make && make install && set STEP_INSTALLED = 1
     
    # ----------------------------------------------
    if ( $STEP_INSTALLED == 1 ) then
        ln -sf /opt/gnu-make-4.3/bin/make /usr/local/bin/gnu-make
        # ..........................................
        cp -f /opt/gnu-make-4.3/include/gnumake.h /usr/local/include/
    endif

    # ----------------------------------------------
    cd $STORAGE && rm -rf $STORAGE/make-4.3
else

    echo "[Caution] Path: ( /opt/gnu-make-4.3 ) Already Exists."
endif

# ########################################################################################################################################################################################################
# ################################################################################################## Ends ################################################################################################

```

## 总结

以上就是关于 Unix运维 Tcsh脚本 编译安装GNU-Make-4.3 的全部内容。

更多内容可以访问我的代码仓库:

https://gitee.com/goufeng928/public

https://github.com/goufeng928/public
